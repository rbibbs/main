<html>
	<head>
		<title>SPOT Interface</title>
		
		<script src="build/spot.js"></script>
		<link rel="stylesheet" type="text/css" href="spot.css">
		
		<style>
			table.spaceytable td {
				padding:10px
			}
			table.constraint-selection-table td {
				padding-right:20px
			}
		</style>

	</head>
	<body>
	<div style="padding-left:80px; padding-right:80px; padding-top:20px; padding-bottom:40px">
		<h1>SPOT Interface</h1>
		
		<p>Please select all the constraints you would like to use by checking the associated checkbox for each constraint. Hover over a constraint name to see its definition. <i>Hover-text is not available for all constraints.</i></p>
		<p>By default, XP and phi are selected as the cateogories to assess violations over. Use the radio buttons next to each constraint to change the desired category.</p>
		<form id="spotForm">
			
			<fieldset>
			
				<legend><h2>Syntax-prosody mapping constraints</h2></legend>
			
				<h3>Align/Wrap</h3>
				<table class="constraint-selection-table">
				<tbody>
					<tr>
						<td><input type="checkbox" name="constraints" value="alignLeft">Align-Left</td>
						<td><input type="radio" name="category-alignLeft" value="cp">CP</td>
						<td><input type="radio" name="category-alignLeft" value="xp" checked="checked">XP</td>
						<td><input type="radio" name="category-alignLeft" value="x0">X0</td>
					</tr>
					<tr>
						<td><input type="checkbox" name="constraints" value="alignRight">Align-Right</td>
						<td><input type="radio" name="category-alignRight" value="cp">CP</td>
						<td><input type="radio" name="category-alignRight" value="xp" checked="checked">XP</td>
						<td><input type="radio" name="category-alignRight" value="x0">X0</td>
					</tr>
					<tr>
						<td><input type="checkbox" name="constraints" value="wrap">Wrap</td>
						<td><input type="radio" name="category-wrap" value="cp">CP</td>
						<td><input type="radio" name="category-wrap" value="xp" checked="checked">XP</td>
						<td><input type="radio" name="category-wrap" value="x0">X0</td>
					</tr>
				</tbody>
				</table>
			
				<h3>Match Theory</h3>
				<table class="constraint-selection-table">
				<tbody>
					<tr>
						<td><input type="checkbox" name="constraints" value="matchSP">MatchSP</td>
						<td><input type="radio" name="category-matchSP" value="cp">CP</td>
						<td><input type="radio" name="category-matchSP" value="xp" checked="checked">XP</td>
						<td><input type="radio" name="category-matchSP" value="x0">X0</td>
					</tr>
					<tr>
						<td><input type="checkbox" name="constraints" value="matchPS">MatchPS</td>
						<td><input type="radio" name="category-matchPS" value="cp">CP</td>
						<td><input type="radio" name="category-matchPS" value="xp" checked="checked">XP</td>
						<td><input type="radio" name="category-matchPS" value="x0">X0</td>
					</tr>
				</tbody>
				</table>
			
			</fieldset>
			
			<br/>
			
			<fieldset>
			
				<legend><h2>Binarity constraints</h2></legend>
			
				<h3>...counting branches</h3>
			
				<table class="constraint-selection-table">
				<tbody>
					<tr>
						<td><input type="checkbox" name="constraints" value="binMinBranches">BinMin(branches)</td>
						<td><input type="radio" name="category-binMinBranches" value="iota">iota</td>
						<td><input type="radio" name="category-binMinBranches" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-binMinBranches" value="w">w</td>
					</tr>
					<tr>
						<td><input type="checkbox" name="constraints" value="binMaxBranches">BinMax(branches) - <i>categorical</i></td>
						<td><input type="radio" name="category-binMaxBranches" value="iota">iota</td>
						<td><input type="radio" name="category-binMaxBranches" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-binMaxBranches" value="w">w</td>
					</tr>
					<tr>
						<td><input type="checkbox" name="constraints" value="binMaxBranchesGradient">BinMax(branches) - <i>gradient</i></td>
						<td><input type="radio" name="category-binMaxBranchesGradient" value="iota">iota</td>
						<td><input type="radio" name="category-binMaxBranchesGradient" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-binMaxBranchesGradient" value="w">w</td>
					</tr>
				</tbody>
				</table>
				
				<h3>...counting words</h3>
				<table class="constraint-selection-table">
				<tbody>
					<tr>
						<td><input type="checkbox" name="constraints" value="binMin2Words">BinMin(words)</td>
						<td><input type="radio" name="category-binMin2Words" value="iota">iota</td>
						<td><input type="radio" name="category-binMin2Words" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-binMin2Words" value="w">w</td>
					</tr>
					<tr>
						<td><input type="checkbox" name="constraints" value="binMax2Words">BinMax(words) - <i>categorical</i></td>
						<td><input type="radio" name="category-binMax2Words" value="iota">iota</td>
						<td><input type="radio" name="category-binMax2Words" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-binMax2Words" value="w">w</td>
					</tr>
					<tr>
						<td><input type="checkbox" name="constraints" value="binMax2WordsGradient">BinMax(words) - <i>gradient</i></td>
						<td><input type="radio" name="category-binMax2WordsGradient" value="iota">iota</td>
						<td><input type="radio" name="category-binMax2WordsGradient" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-binMax2WordsGradient" value="w">w</td>
					</tr>
				</tbody>
				</table>
			</fieldset>
			
			<br/>
			
			<fieldset>
			
				<legend><h2>Markedness constraints on horizontal relationships</h2></legend>
				<h3>EqualSisters</h3>
				<table class="constraint-selection-table">
				<tbody>
					<tr>
						<td title="Assign a violation for every pair of adjacent sister nodes that are not of the same prosodic category."><input type="checkbox" name="constraints" value="equalSistersAdj">EqualSisters (adjacent)</td>
						<td><input type="radio" name="category-equalSistersAdj" value="iota">iota</td>
						<td><input type="radio" name="category-equalSistersAdj" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-equalSistersAdj" value="w">w</td>
					</tr>
					<tr>
						<td title="Assign a violation for every (unordered) pair of sisters nodes that are not of the same prosodic category."><input type="checkbox" name="constraints" value="equalSistersPairwise">EqualSisters (pairwise)</td>
						<td><input type="radio" name="category-equalSistersPairwise" value="iota">iota</td>
						<td><input type="radio" name="category-equalSistersPairwise" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-equalSistersPairwise" value="w">w</td>
					</tr>
					<tr>
						<td title="For each set of sisters, assign a violation for every child that has a different prosodic category from the first (leftmost) sister in the set."><input type="checkbox" name="constraints" value="equalSistersFirstPrivilege">EqualSisters (first privilege)</td>
						<td><input type="radio" name="category-equalSistersFirstPrivilege" value="iota">iota</td>
						<td><input type="radio" name="category-equalSistersFirstPrivilege" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-equalSistersFirstPrivilege" value="w">w</td>
					</tr>
				</tbody>
				</table>
				
				<h3>StrongStart</h3>
				<table class="constraint-selection-table">
				<tbody>
					<tr>
						<td title="Assign a violation for every node whose leftmost daughter constituent is of type k and is lower in the prosodic hierarchy than its sister constituent immediately to its right: *(Kn Kn-1). (Elfner's StrongStart)"><input type="checkbox" name="constraints" value="strongStart">StrongStart</td>
						<td><input type="radio" name="category-strongStart" value="iota">iota</td>
						<td><input type="radio" name="category-strongStart" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-strongStart" value="w">w</td>
					</tr>
				</tbody>
				</table>
				
			</fieldset>
			
			<br/>
			
			<fieldset>
			
				<legend><h2>Markedness constraints on vertical relationships</h2></legend>
				<table class="constraint-selection-table">
				<tbody>
					<tr>
						<td title="Assign a violation for every parent-child pair (x,y) such that x is of PH-level n and y is of PH-level n-m, m >= 2."><input type="checkbox" name="constraints" value="exhaustivity">Exhaustivity</td>
					</tr>
					<tr>
						<td title="Assign a violation for every node of category x immediately dominated by another node of category x."><input type="checkbox" name="constraints" value="nonRec1">Non-recursivity, assessed by dominated node</td>
						<td><input type="radio" name="category-nonRec1" value="iota">iota</td>
						<td><input type="radio" name="category-nonRec1" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-nonRec1" value="w">w</td>
					</tr>
					<tr>
						<td title="&quot;Any two p-phrases that are not disjoint in extension are identical in extension.&quot; For every node x of category p dominated by another node y of category p, assign a violation for every leaf dominated by y that is not also dominated by x."><input type="checkbox" name="constraints" value="nonRecTruckenbrodt">Non-recursivity, assessed by non-overlapping leaves</td>
						<td><input type="radio" name="category-nonRecTruckenbrodt" value="iota">iota</td>
						<td><input type="radio" name="category-nonRecTruckenbrodt" value="phi" checked="checked">phi</td>
						<td><input type="radio" name="category-nonRecTruckenbrodt" value="w">w</td>
					</tr>
				</tbody>
				</table>
				
			</fieldset>
			<br/>
			
			<fieldset>
				<legend><h2>Japanese: constraints on accentedness</h2></legend>
				<p><i>N.B. Current evaluation of these constraints requires the id's of all words to be 'a' or 'u' </i> </p>
				<input type="checkbox" name="constraints" value="accentAsHead"><b>AccentAsHead</b>: Assign a violation for each prosodic word that is not the head of a minimal phi.<br/>
				<input type="checkbox" name="constraints" value="noLapseL"><b>NoLapse-L</b>: No accentual lapse. Assign a violation for every fully L-toned w.<br/>
			</fieldset>
			
			<br/>
			<br/>
			<hr/>
			<h2>Input syntactic tree</h2>
			
            <button id="startTreeUIButton" type="button">Generate JS for a tree</button>
            <div id="treeUI" style="display:none">
                <p>String of terminals: <input type="text" name="sTreeTerminals"> <button id="goButton" type="button">Go!</button><p/>
                <div id="treeTableContainer">
                	
                </div>
            </div>
			<p><i>Currently only supports evaluation of one syntactic tree at a time. If you want to look at more than one tree, you can run all the trees you're interested in one at a time, and paste the resulting text-area's contents into OT Workplace as you go along.</i></p>
			<p>Select a tree from your JavaScript tree file (pre-made trees are in the directory <i>main/trees</i>, and end with .js). Paste in the contents of JS file of your input syntactic tree (from the opening brace to the closing brace, removing any comments and excluding the final semi-colon). Note that if you're only using Markedness constraints, you can just keep the default value of an empty tree (like so: {}) as the syntactic input.</p>
			<textarea name="sTree" rows="15" style="width:90%">{}</textarea>
			
			<br/>
			<br/>
			<hr/>
			<h2>Gen options</h2>
			Generate only prosodic trees that obey...<br/>
			<table class="spaceytable"><tbody><tr>
				<td><input type="checkbox" name="genOptions" value="obeysNonrecursivity">Non-recursivity</td>
				<td><input type="checkbox" name="genOptions" value="obeysExhaustivity">Exhaustivity</td>
				<td><input type="checkbox" name="genOptions" value="obeysHeadedness">Headedness</td>
			</tr></tbody></table>
			<small>(The more boxes are checked, the fewer trees will be generated.)</small><br/>
			
			<hr/>
			
			<h2>Input string(s) for Gen (to create output candidate prosodic trees)</h2>
			<p><b>Instructions</b>: Type the words that you want to be included in the output prosodic trees, separating them with spaces. Be sure to make the words you type as input to Gen exactly match the ids of the nodes in your input syntactic tree -- BUT exclude any indices. E.g. If your syntactic tree contains nodes with ids <i>"tomodachi-no_0", "pasokon_1"</i>, then the input to Gen should be "tomodachi-no pasokon". This will ensure that Match and Align function properly.</p>
			<p><b>N.B.</b> Input strings longer than 6 words may be very slow, and risk freezing your system.</p>
			
			<p>Input 1: <input type="text" name="inputToGen"><p/>
			<!--
			<p>Input 2: <input type="text" name="inputToGen"><p/>
			<p>Input 3: <input type="text" name="inputToGen"><p/>
			
			-->
			<div align="center"><input type="submit" value="Submit" style="font-size:18px; font-weight:bold">
			<h2>Scroll down to see your results!</h2></div>
		
		</form>

		<pre id="results-container"></pre>

	</div>
	
	
	</body>
</html>
